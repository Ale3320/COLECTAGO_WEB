<div class="auth-container d-flex justify-content-center align-items-center">
  <div class="auth-box">
    <div class="card shadow-sm auth-card">
      <div class="card-body">

        <h3 class="card-title text-center mb-3">Crear cuenta</h3>
        <p class="text-muted text-center mb-4">
          Regístrate para invertir o crear campañas en la plataforma.
        </p>

        <!-- Mensaje de éxito -->
        <div *ngIf="success" class="alert alert-success py-2">
          {{ success }}
        </div>

        <!-- Mensaje de error -->
        <div *ngIf="error" class="alert alert-danger py-2">
          {{ error }}
        </div>

        <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">

          <!-- Nombre de usuario -->
          <div class="mb-3">
            <label for="userName" class="form-label">Nombre de usuario</label>
            <input
              type="text"
              id="userName"
              class="form-control"
              formControlName="userName"
              [class.is-invalid]="userName?.invalid && (userName?.touched || userName?.dirty)">

            <div class="invalid-feedback" *ngIf="userName?.errors?.['required']">
              El nombre de usuario es obligatorio.
            </div>
            <div class="invalid-feedback" *ngIf="userName?.errors?.['minlength']">
              Debe tener al menos 3 caracteres.
            </div>
          </div>

          <!-- Correo -->
          <div class="mb-3">
            <label for="mail" class="form-label">Correo electrónico</label>
            <input
              type="email"
              id="mail"
              class="form-control"
              formControlName="mail"
              [class.is-invalid]="mail?.invalid && (mail?.touched || mail?.dirty)">

            <div class="invalid-feedback" *ngIf="mail?.errors?.['required']">
              El correo es obligatorio.
            </div>
            <div class="invalid-feedback" *ngIf="mail?.errors?.['email']">
              Ingresa un correo válido.
            </div>
          </div>

          <!-- Contraseña -->
          <div class="mb-3">
            <label for="password" class="form-label">Contraseña</label>
            <input
              type="password"
              id="password"
              class="form-control"
              formControlName="password"
              [class.is-invalid]="password?.invalid && (password?.touched || password?.dirty)">

            <div class="invalid-feedback" *ngIf="password?.errors?.['required']">
              La contraseña es obligatoria.
            </div>
            <div class="invalid-feedback" *ngIf="password?.errors?.['minlength']">
              Debe tener al menos 6 caracteres.
            </div>
          </div>

          <!-- País -->
          <div class="mb-3">
            <label for="country" class="form-label">País</label>
            <input
              type="text"
              id="country"
              class="form-control"
              formControlName="country"
              [class.is-invalid]="country?.invalid && (country?.touched || country?.dirty)">

            <div class="invalid-feedback" *ngIf="country?.errors?.['required']">
              El país es obligatorio.
            </div>
          </div>

          <!-- Teléfono -->
          <div class="mb-3">
            <label for="phone" class="form-label">Teléfono (opcional)</label>
            <input
              type="tel"
              id="phone"
              class="form-control"
              formControlName="phone">
          </div>

          <!-- Rol -->
          <div class="mb-3">
            <label for="role" class="form-label">Tipo de cuenta</label>
            <select
              id="role"
              class="form-select"
              formControlName="role"
              [class.is-invalid]="roleCtrl?.invalid && (roleCtrl?.touched || roleCtrl?.dirty)">
              <option *ngFor="let r of roles" [value]="r.value">
                {{ r.label }}
              </option>
            </select>

            <div class="invalid-feedback" *ngIf="roleCtrl?.errors?.['required']">
              Debes seleccionar un tipo de cuenta.
            </div>
          </div>

          <!-- Campos adicionales SOLO para Crowdfounder -->
          <div *ngIf="roleCtrl?.value === 'crowdfounder'">

            <div class="mb-3">
              <label for="organization" class="form-label">Organización</label>
              <input
                type="text"
                id="organization"
                class="form-control"
                formControlName="organization"
                [class.is-invalid]="organization?.invalid && (organization?.touched || organization?.dirty)">

              <div class="invalid-feedback" *ngIf="organization?.errors?.['required']">
                La organización es obligatoria para cuentas crowdfounder.
              </div>
            </div>

            <div class="mb-3">
              <label for="bio" class="form-label">Bio (opcional)</label>
              <textarea
                id="bio"
                rows="2"
                class="form-control"
                formControlName="bio"></textarea>
            </div>

            <div class="mb-3">
              <label for="website" class="form-label">Sitio web (opcional)</label>
              <input
                type="url"
                id="website"
                class="form-control"
                formControlName="website">
            </div>

          </div>

          <!-- Botón -->
          <div class="d-grid mt-3">
            <button
              type="submit"
              class="btn btn-primary"
              [disabled]="loading">
              <span *ngIf="!loading">Crear cuenta</span>
              <span *ngIf="loading">Creando cuenta...</span>
            </button>
          </div>
        </form>

        <p class="text-muted small text-center mt-3 mb-0">
          ¿Ya tienes cuenta?
          <a routerLink="/login">Inicia sesión aquí</a>
        </p>

      </div>
    </div>
  </div>
</div>
